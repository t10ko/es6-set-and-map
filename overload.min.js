/*! es6-set-and-map - v1.0.0 - 2016-10-01
 * https://github.com/t10ko/es6-set&map
 * Copyright (c) 2016 Tigran Atayan; License: GPL-3.0 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):("object"==typeof exports?exports:t).SM=n()}(this,function(){"use strict";function t(t){return null!=t&&("function"==typeof t||"object"==typeof t)}function n(n){return!t(n)}function e(t){return!isNaN(t)&&t+0===t}function i(t){return null!=t&&t===t.window}function r(n){if(!t(n)||K(n)||i(n))return!1;var r=!!n&&"length"in n&&n.length;return T(n)||0===r||e(r)&&r>0&&r-1 in n}function u(t,n,e){var i,r,u=[],s=t.length;if(n=(n=n||0)>=0?n:Math.max(0,s+n),(e=isNaN(e)?s:Math.min(e,s))<0&&(e=s+e),(r=e-n)>0)for(u=Array(r),i=0;i<r;i++)u[i]=t[n+i];return u}function s(t){return n(t)||"toString"in t}function o(t,n){var e=t.prototype=Object.create(n&&n.prototype||null);return e.constructor=t,e}function l(t){return Math.random().toString(16).substr(2,t||8)}function h(n,e){if(!t(n))return n+"";var i=n.objectUniqueID;return i||e||Object.defineProperty(n,"objectUniqueID",{value:i=l()}),i}function a(t,n){var e=t[n];return t.splice(n,1),e}function c(t,n,e){if(r(n)||(n=[n]),void 0===e)k.push.apply(t,n);else{var i=[e,0];k.push.apply(i,n),k.splice.apply(t,i)}return t}function f(){this.values=[],this.primitiveKeys=[],this.keyToValue={}}function y(){this.keys=[],this.IDToKey={},f.call(this)}function p(t){f.call(this),t&&(r(t)||(t=[t]),this.addMulti(t))}var v,d,g={},x=g,k=Array.prototype,m=function(){var t={}.hasOwnProperty;return function(n,e){return!!e&&t.call(n,e)}}(),T=Array.isArray,K=function(){var t=Function.prototype;return function(n){return"function"==typeof n&&n!=t}}();return function(){function t(t,n,e){for(var i,r=1;r<n.length;r++)for(var u=n[r],s=0;(s=t.indexOf(u,s))!=-1;){if(a(t,s),e)return s;i||(i=[]),i.push(s)}return i}v=function(n){return t(n,arguments,!1)},d=function(n){return t(n,arguments,!0)}}(),function(t,n){function e(t){return this.key=this.primitiveKeys[this.index]||null,this.value=this.key&&this.keyToValue[this.key],t?this.value:!!this.key}function i(t,n,e,i){var r=m(this.keyToValue,t),u=!r||!e;return r||(c(this.values,n,i),c(this.primitiveKeys,t,i),this.length++),u&&(r&&(this.values[this.primitiveKeys.indexOf(t)]=n),this.keyToValue[t]=n),u}function r(t){return this.keyToValue[t]}function u(t){return m(this.keyToValue,t)}function s(t){var n=-1,e=m(this.keyToValue,t);return e&&(delete this.keyToValue[t],a(this.values,n=d(this.primitiveKeys,t)),this.length--),n}n.values=null,n.primitiveKeys=null,n.keyToValue=null,n.length=0,n.index=-1,n.key=null,n.value=null,n.start=function(){this.index=-1,e.call(this)},n.end=function(){this.index=this.length,e.call(this)},n.first=function(t){return this.index=0,e.call(this,t)},n.next=function(t){return this.index++,e.call(this,t)},n.prev=function(t){return this.index--,e.call(this,t)},n.last=function(t){return this.index=this.length-1,e.call(this,t)},n.getFirst=function(){return this.first(!0)},n.getNext=function(){return this.next(!0)},n.getPrev=function(){return this.prev(!0)},n.getLast=function(){return this.last(!0)},n.clear=function(){return this.values=[],this.primitiveKeys=[],this.keyToValue={},this.length=0,this.index=-1,this.key=null,this.value=null,this},t.set=function(t,n,e,r,u){return i.call(t,n,e,r,u)},t.get=function(t,n){return r.call(t,n)},t.has=function(t,n){return u.call(t,n)},t.delete=function(t,n){return s.call(t,n)}}(f,f.prototype),x.map=y,function(n,i){function o(t,n,e,i){var r=h(t),u=!!r&&f.set(this,r,n,e,i);return u&&(c(this.keys,t,i),this.IDToKey[r]=t),u}function l(t,n,i){var r,u;if(this.has(t)){if(!e(r=this.get(t)))return!1}else r=0;return u=r,o.call(this,t,r+=n)?i||(u=r):u=!1,u}function p(t,n,e,i){var u,s=this.has(t),l=!1;return(s?r(u=this.get(t)):e)&&(s||(u=[]),l=n.apply(u,e||[]),i&&(u=l),s&&!i||o.call(this,t,u)||(l=!1)),l}function v(n,e,i,r){var u,s,l=this.has(n);return!(l?!t(u=this.get(n)):!o.call(this,n,u={}))&&(s=!m(u,e)||!r,s&&(u[e]=i),s)}function d(t,n){var e=i[t].apply(this,n);return this.key=this.IDToKey[this.key],e}n.keys=null,n.IDToKey=null,n.set=function(t,n,e){return o.call(this,t,n,!1,e),this},n.add=function(t,n,e){return o.call(this,t,n,!0,e)},n["++"]=function(t){return l.call(this,t,1,!0)},n["--"]=function(t){return l.call(this,t,-1)},n.push=function(t){return p.call(this,t,k.push,u(arguments,1))},n.unshift=function(t){return p.call(this,t,k.unshift,u(arguments,1))},n.concat=function(t){return p.call(this,t,k.concat,u(arguments,1),!0)},n.splice=function(t){return p.call(this,t,k.splice,u(arguments,1),!0)},n.pop=function(t){return p.call(this,t,k.pop)},n.shift=function(t){return p.call(this,t,k.shift)},n.setProp=function(t,n,e){return v.call(this,t,n,e,!1)},n.addProp=function(t,n,e){return v.call(this,t,n,e,!0)},n.getProp=function(n,e){var i;return this.has(n)&&t(i=this.get(n))&&i[e]},n.hasProp=function(n,e){var i;return s(e)&&this.has(n)&&t(i=this.get(n))&&m(i,e)},n.deleteProp=function(n,e){var i,r=this.has(n)&&t(i=this.get(n))&&m(i,e);return r&&delete i[e],r},n.get=function(t){var n=h(t,!0);return n&&f.get(this,n)||void 0},n.has=function(t){var n=h(t,!0);return!!n&&f.has(this,n)},n.delete=function(t){var n=h(t),e=!!n&&m(this.IDToKey,n);return e&&(delete this.IDToKey[n],a(this.keys,f.delete(this,n))),e},n.first=function(){return d.call(this,"first",arguments)},n.next=function(){return d.call(this,"next",arguments)},n.prev=function(){return d.call(this,"prev",arguments)},n.last=function(){return d.call(this,"last",arguments)},window.Symbol&&(n[Symbol.iterator]=function(){var t=this;return this.start(),{next:function(){var n=!t.next();return{done:n,value:[t.key,t.value]}}}}),n.clear=function(){i.clear.call(this),this.IDToKey={}},n.clone=function(){var t=new y;for(this.start();this.next();)t.add(this.key,this.value);return t}}(o(y,f),f.prototype),x.set=p,function(t){t.add=function(t,n){var e=h(t);return!!e&&f.set(this,e,t,!0,n)},t.addMulti=function(t,n){for(var e=0,i=0;i<t.length;i++)this.add(t[i],n)&&e++;return e},t.has=function(t){var n=h(t,!0);return!!n&&f.has(this,n)},t.delete=function(t){var n=h(t,!0);return f.delete(this,n)!=-1},window.Symbol&&(t[Symbol.iterator]=function(){var t=this;return this.start(),{next:function(){var n=!t.next();return{done:n,value:t.value}}}}),t.clone=function(){var t=new p;for(this.start();this.next();)t.add(this.value);return t}}(o(p,f)),x});